<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src='https://lyavon.github.io/np_calc/framework/np_calc.js'></script>
  </head>
  <body>
    <div class='container-fluid'>
      <div class='row'>
        <div class='col-12'>
          <p class='fw-bold fs-3'>
            Индекс оксигенации
          </p>
          <hr/>
        </div>
      </div>

      <div class='row'>
        <div class='col-md-12'>
          <!--
          <div class='btn-group btn-group-lg mb-2'>
            <button class='btn btn-primary' id='description_button'>
              Описание
            </button>
            <button class='btn btn-primary' id='oxygen_support_button'>
              Кислородная поддержка
            </button>
          </div>
          -->
          <div class='list-group list-group-horizontal-md'>
            <a href='#' class='list-group-item list-group-item-action' id='description_button'>
              Описание
            </a>
            <a href='#' class='list-group-item list-group-item-action' id='oxygen_support_button'>
              Кислородная поддержка
            </a>
            <a href='#' class='list-group-item list-group-item-action' id='interpretation_button'>
              Интерпретация индекса оксигенации
            </a>
          </div>
        </div>
      </div>
      <div class='d-none' id='description_content'>
        <div class='row'>
          <div class='col-12'>
            <p>
              Индекс оксигенации (ИО) — это параметр, используемый в
              анестезиологии-реаниматологии и интенсивной терапии для оценки степени
              эффективности вентиляции лёгких и диффузии \(O_2\) через
              альвеолокапиллярную мембрану.
            </p>
            <p>
              ИО может использоваться для оценки указанных процессов, в том числе и
              при терапии с применением кислородной поддержки.
            </p>
          </div>
        </div>
      </div>
      <div class='d-none' id='oxygen_support_content'>
        <div class='row'>
          <div class='col-12'>
            <p>
              Ниже представлены примерные уровни повышения \(FiO_2\) при
              использовании различных приспособлений для кислородной поддержки:
            </p>
          </div>
        </div>
        <div class='row'>
          <div class='col-md-3'>
            <table class='table table-striped table-bordered'>
              <thead class='bg-secondary text-white'>
                <tr>
                  <td colspan='2' class='text-center fw-bold'>
                    Назальная канюля
                  </td>
                </tr>
                <tr>
                  <td>
                    Скорость потока, л/мин
                  </td>
                  <td>
                    \(FiO_2, \%\)
                  </td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    1
                  </td>
                  <td>
                    24
                  </td>
                </tr>
                <tr>
                  <td>
                    2
                  </td>
                  <td>
                    28
                  </td>
                </tr>
                <tr>
                  <td>
                    3
                  </td>
                  <td>
                    32
                  </td>
                </tr>
                <tr>
                  <td>
                    4
                  </td>
                  <td>
                    36
                  </td>
                </tr>
                <tr>
                  <td>
                    5
                  </td>
                  <td>
                    40
                  </td>
                </tr>
                <tr>
                  <td>
                    6
                  </td>
                  <td>
                    44
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class='col-md-3'>
            <table class='table table-striped table-bordered'>
              <thead class='bg-secondary text-white'>
                <tr>
                  <td class='text-center fw-bold' colspan=2>
                    Назофарингеальный катетер
                  </td>
                </tr>
                <tr>
                  <td>
                    Скорость потока, л/мин
                  </td>
                  <td>
                    \(FiO_2, \%\)
                  </td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    4
                  </td>
                  <td>
                    40
                  </td>
                </tr>
                <tr>
                  <td>
                    5
                  </td>
                  <td>
                    50
                  </td>
                </tr>
                <tr>
                  <td>
                    6
                  </td>
                  <td>
                    60
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class='col-md-3'>
            <table class='table table-striped table-bordered'>
              <thead class='bg-secondary text-white'>
                <tr>
                  <td class='text-center fw-bold' colspan=2>
                    Назофарингеальная маска
                  </td>
                <tr>
                  <td>
                    Скорость потока, л/мин
                  </td>
                  <td>
                    \(FiO_2, \%\)
                  </td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    5
                  </td>
                  <td>
                    40
                  </td>
                </tr>
                <tr>
                  <td>
                    6
                  </td>
                  <td>
                    50
                  </td>
                </tr>
                <tr>
                  <td>
                    7
                  </td>
                  <td>
                    60
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class='col-md-3'>
            <table class='table table-striped table-bordered'>
              <thead class='bg-secondary text-white'>
                <tr>
                  <td class='text-center fw-bold' colspan=2>
                    Назофарингеальная маска с резервуаром
                  </td>
                </tr>
                <tr>
                  <td>
                    Скорость потока, л/мин
                  </td>
                  <td>
                    \(FiO_2, \%\)
                  </td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    6
                  </td>
                  <td>
                    60
                  </td>
                </tr>
                <tr>
                  <td>
                    7
                  </td>
                  <td>
                    70
                  </td>
                </tr>
                <tr>
                  <td>
                    8
                  </td>
                  <td>
                    80
                  </td>
                </tr>
                <tr>
                  <td>
                    9
                  </td>
                  <td>
                    90
                  </td>
                </tr>
                <tr>
                  <td>
                    10
                  </td>
                  <td>
                    95
                  </td>
                </tr>
              </tbody>
            </table>
            <p>
            </p>
          </div>
        </div>
      </div>
      <div class='d-none' id='interpretation_content'>
        <div class='row'>
          <div class='col-12'>
            <p>
              Индекс оксигенации является качественным признаком для
              определения степени острой дыхательной недостаточности.
            </p>
            <p>
              Известно, что снижение ИО считается одним из главных  критериев
              острого респираторного дистресс-синдрома (ОРДС). При этом степень
              нарушения оксигенирующей функции легких является и
              дифференциально-диагностическим критерием для острого повреждения
              легких (ОПЛ) и его наиболее тяжелой стадии — ОРДС.
            </p>
          </div>
        </div>
        <div class='row'>
          <div class='col-md-6'>
            <table class='table table-striped table-bordered'>
              <thead class='bg-secondary text-white'>
                <tr>
                  <td class='text-center fw-bold' colspan=2>
                    Интерпретация Индекса оксигенации
                  </td>
                </tr>
                <tr>
                  <td>
                    Индекс оксигенации
                  </td>
                  <td>
                    Заключение
                  </td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    500 (476)
                  </td>
                  <td>
                    Норма
                  </td>
                </tr>
                <tr>
                  <td>
                    < 300
                  </td>
                  <td>
                    Острое повреждение лёгких
                  </td>
                </tr>
                <tr>
                  <td>
                    < 200
                  </td>
                  <td>
                    Острый респираторный дистресс-синдром
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class='col-md-6'>
            <table class='table table-striped table-bordered'>
              <thead class='bg-secondary text-white'>
                <tr>
                  <td class='text-center fw-bold' colspan=3>
                    Оценка степени тяжести ОРДС
                  </td>
                </tr>
                <tr>
                  <td>
                    Степень тяжести ОРДС
                  </td>
                  <td>
                    Индекс оксигенации
                  </td>
                  <td>
                    Летальность
                  </td>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    Лёгкая (ОПЛ)
                  </td>
                  <td>
                    200-300
                  </td>
                  <td>
                    27%
                  </td>
                </tr>
                <tr>
                  <td>
                    Средняя
                  </td>
                  <td>
                    100-200
                  </td>
                  <td>
                    32%
                  </td>
                </tr>
                <tr>
                  <td>
                    Тяжёлая
                  </td>
                  <td>
                    <100
                  </td>
                  <td>
                    45%
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <script>
        const description_content = get('#description_content');
        const description_button = get('#description_button');
        const oxygen_support_content = get('#oxygen_support_content');
        const oxygen_support_button = get('#oxygen_support_button');
        const interpretation_content = get('#interpretation_content');
        const interpretation_button = get('#interpretation_button');
        const setActiveContent = (name) => {
          switch (name) {
          case 'description':
            description_content.classList.replace('d-none', 'd-block');
            description_button.classList.add('active');

            oxygen_support_content.classList.replace('d-block', 'd-none');
            oxygen_support_button.classList.remove('active');

            interpretation_content.classList.replace('d-block', 'd-none');
            interpretation_button.classList.remove('active');
            break;
          case 'oxygen_support':
            oxygen_support_content.classList.replace('d-none', 'd-block');
            oxygen_support_button.classList.add('active');

            description_content.classList.replace('d-block', 'd-none');
            description_button.classList.remove('active');

            interpretation_content.classList.replace('d-block', 'd-none');
            interpretation_button.classList.remove('active');
            break;
          case 'interpretation':
            interpretation_content.classList.replace('d-none', 'd-block');
            interpretation_button.classList.add('active');

            description_content.classList.replace('d-block', 'd-none');
            description_button.classList.remove('active');

            oxygen_support_content.classList.replace('d-block', 'd-none');
            oxygen_support_button.classList.remove('active');
            break;
          }
        };
        window.addEventListener('load', () => setActiveContent('description'));
        description_button.addEventListener('click', () => setActiveContent('description'));
        oxygen_support_button.addEventListener('click', () => setActiveContent('oxygen_support'));
        interpretation_button.addEventListener('click', () => setActiveContent('interpretation'));
      </script>
      <hr/>

      <div class='row'>
        <div class='col-md-9'>
          <input type='range' class='form-range' min='0' max='200' step='1' value='100' id='pao2_in_range'/>
        </div>
        <div class='col-md-3'>
          <p>
            <input type='number' id='pao2_in_number' value='100' min='0' max='200'/>
            \(PaO_2, mmHg\)
          </p>
        </div>
      </div>
      <div class='row'>
        <div class='col-md-9'>
          <input type='range' class='form-range' min='1' max='100' step='1' value='21' id='chio2_in_range'>
        </div>
        <div class='col-md-3'>
            <p>
              <input type='number' id='chio2_in_number' value='21' min='1' max='100'/>
              \(FiO_2, \%\)
            </p>
        </div>
      </div>
      <div class='row'>
        <div class='col-12'>
          <p id='output'/>
        </div>
      </div>
      <script>
        const oi = () => {
          const pao2 = pao2_in_range.value;
          const chio2 = chio2_in_range.value;
          const oi = Math.round(pao2 / chio2 * 100);
          return String.raw`\(ИО = \frac{PaO_2}{FiO_2} = \frac{${pao2}}{0.${chio2}} = ${oi} \)`;
        };
        const updateOutput = () => {
          output.innerHTML = oi();
          MathJax.typeset();
        };
        window.addEventListener('load', updateOutput);

        let pao2_in_number = get('#pao2_in_number');
        let pao2_in_range = get('#pao2_in_range');
        let chio2_in_number = get('#chio2_in_number');
        let chio2_in_range = get('#chio2_in_range');
        let output = get('#output');

        pao2_in_number.addEventListener('change', (e) => {
          pao2_in_range.value = pao2_in_number.value;
          updateOutput();
        });
        pao2_in_range.addEventListener('change', (e) => {
          pao2_in_number.value = pao2_in_range.value;
          updateOutput();
        });
        chio2_in_number.addEventListener('change', (e) => {
          chio2_in_range.value = chio2_in_number.value;
          updateOutput();
        });
        chio2_in_range.addEventListener('change', (e) => {
          chio2_in_number.value = chio2_in_range.value;
          updateOutput();
        });
      </script>
      <hr/>
    </div>
  </body>
</html>
