<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src='https://lyavon.github.io/np_calc/np_calc.js'></script>
  </head>
  <body>
    <h3 class='bold'>Индекс оксигенации (ИО)</h3>
    <hr/>
    <p>Индекс оксигенации — это параметр, используемый в анестезиологии-реаниматологии и интенсивной терапии для оценки функции обмена кислорода в легких.</p>
    <p>ИО является качественным признаком для определения степени острой дыхательной недостаточности. В норме ИО равен примерно 500. Известно, что снижение ИО считается одним из главных  критериев острого респираторного дистресс-синдрома (ОРДС). При этом степень нарушения оксигенирующей функции легких является и дифференциально-диагностическим критерием для острого повреждения легких (ОПЛ) и его наиболее тяжелой стадии — ОРДС:</p>
    <p>ИО < 300 — ОПЛ</p>
    <p>ИО < 200 — ОРДС</p>
    <hr/>
    <input type="range" min="0" max="200" step="1" value="100" id="pao2_in_range">
      <input type="number" class='font-x-large' id="pao2_in_number" value="100" min="0" max="200"></input>
        <span class='font-x-large'>\(PaO_2, mmHg\)</span>
    </input>
    <output id='pao2_out'></output>
    <br/>
    <input type="range" min="1" max="100" step="1" value="21" id="chio2_in_range">
      <input type="number" class='font-x-large' id="chio2_in_number" value="21" min="1" max="100"></input>
        <span class='font-x-large'>\(FiO_2, \%\)</span>
    </input>
    <br/>
    <p id="output" class='bold font-xx-large'/>

    <script>
      const oi = () => {
        const oi = Math.round(
          pao2_in_range.value / chio2_in_range.value * 100
        );
        return String.raw`\(ИО = \frac{PaO_2}{FiO_2} = ${oi} \)`;
      };
      const updateOutput = () => {
        output.innerHTML = oi();
        MathJax.typeset();
      };
      window.addEventListener('load', updateOutput);

      pao2_in_number = get('#pao2_in_number');
      pao2_in_range = get('#pao2_in_range');
      chio2_in_number = get('#chio2_in_number');
      chio2_in_range = get('#chio2_in_range');
      output = get('#output');

      pao2_in_number.addEventListener('change', (e) => {
        pao2_in_range.value = pao2_in_number.value;
        updateOutput();
      });
      pao2_in_range.addEventListener('change', (e) => {
        pao2_in_number.value = pao2_in_range.value;
        updateOutput();
      });
      chio2_in_number.addEventListener('change', (e) => {
        chio2_in_range.value = chio2_in_number.value;
        updateOutput();
      });
      chio2_in_range.addEventListener('change', (e) => {
        chio2_in_number.value = chio2_in_range.value;
        updateOutput();
      });

    </script>
  </body>
</html>
